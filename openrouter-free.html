<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OpenRouter ‚Äì Free‚ÄëTier Models</title>
<style>
    body{
        font-family:Arial,Helvetica,sans-serif;
        background:#f5f5f5;
        margin:0;
        padding:0;
        display:flex;
        justify-content:center;
        align-items:flex-start;
        min-height:100vh;
    }
    .card{
        background:#fff;
        max-width:800px;
        width:100%;
        margin:2rem;
        padding:1.5rem 2rem;
        border-radius:8px;
        box-shadow:0 2px 12px rgba(0,0,0,.1);
    }
    h1{
        margin-top:0;
        text-align:center;
        font-size:1.8rem;
    }
    button{
        background:#007bff;
        color:#fff;
        border:none;
        border-radius:4px;
        padding:.6rem 1.2rem;
        cursor:pointer;
        font-size:1rem;
    }
    button:hover{background:#0056b3;}
    #result{
        margin-top:1.5rem;
        background:#fafafa;
        border:1px solid #e0e0e0;
        border-radius:4px;
        padding:1rem;
        max-height:400px;
        overflow:auto;
        white-space:pre-wrap;
        font-family:monospace;
    }
    .msg{
        margin-top:.8rem;
        color:#555;
    }
    .error{
        color:#c00;
        font-weight:bold;
    }
    .copyBtn{
        background:#eee;
        border:none;
        padding:.2rem .5rem;
        margin-left:.5rem;
        cursor:pointer;
        border-radius:3px;
        font-size:.9rem;
    }
</style>
</head>
<body>

<div class="card">
    <h1>OpenRouter ‚Äì Free‚ÄëTier Model IDs</h1>

    <p class="msg">
        Click the button below to fetch the list of models whose **prompt** and **completion** cost are <code>0</code>.
    </p>

    <button id="loadBtn">Load Free Models üöÄ</button>
    <button id="copyAllBtn" class="copyBtn" style="display:none;">Copy All</button>

    <div id="result" hidden></div>
</div>

<script>
const ENDPOINT = 'https://openrouter.ai/api/v1/models';   // change to a CORS‚Äëproxy if needed

document.getElementById('loadBtn').addEventListener('click', async () => {
    const resultDiv = document.getElementById('result');
    const copyBtn   = document.getElementById('copyAllBtn');
    resultDiv.hidden = true;
    resultDiv.textContent = '';
    copyBtn.style.display = 'none';

    try {
        const resp = await fetch(ENDPOINT);
        if (!resp.ok) throw new Error(`HTTP ${resp.status} ‚Äì ${resp.statusText}`);

        const json = await resp.json();

        // Guard: the data we need should be in json.data (array)
        if (!Array.isArray(json.data)) throw new Error('Unexpected response format');

        // Filter: both prompt and completion prices must be "0"
        const freeIds = json.data
            .filter(m => m.pricing?.prompt === "0" && m.pricing?.completion === "0")
            .map(m => m.id);

        if (freeIds.length === 0) {
            resultDiv.textContent = 'No free‚Äëtier models found.';
        } else {
            // Show each ID on its own line
            resultDiv.textContent = freeIds.join('\n');
            copyBtn.style.display = 'inline-block';
        }

        resultDiv.hidden = false;
    } catch (e) {
        resultDiv.innerHTML = `<span class="error">‚ùó Error: ${e.message}</span>`;
        resultDiv.hidden = false;
    }
});

/* ---- Copy‚ÄëAll button ---- */
document.getElementById('copyAllBtn').addEventListener('click', async () => {
    const text = document.getElementById('result').textContent;
    try {
        await navigator.clipboard.writeText(text);
        const btn = document.getElementById('copyAllBtn');
        btn.textContent = 'Copied!';
        setTimeout(() => btn.textContent = 'Copy All', 1500);
    } catch (err) {
        alert('Copy failed: ' + err);
    }
});
</script>

</body>
</html>
